@model IEnumerable<Discounts.Application.DTOs.Offer.OfferDto>

@{
	ViewData["Title"] = "მთავარი - Discounts.Ge";
}

<div class="text-center mb-5 mt-4">
	<h1 class="display-4 fw-bold text-primary">დღის საუკეთესო ფასდაკლებები</h1>
	<p class="lead text-muted">იყიდე კუპონი და დაზოგე თანხა!</p>
</div>

<div class="container">
	@if (!Model.Any())
	{
		<div class="alert alert-info text-center">
			<i class="bi bi-info-circle"></i> ამჟამად აქტიური ფასდაკლებები არ მოიძებნა.
		</div>
	}
	else
	{
		<div class="row row-cols-1 row-cols-md-3 row-cols-lg-4 g-4">
			@foreach (var offer in Model)
			{
				<div class="col">
					<div class="card h-100 shadow-sm border-0 position-relative">
						@{
							var discountPercent = Math.Round((1 - (offer.DiscountPrice / offer.OriginalPrice)) * 100);
						}
						<span class="badge bg-danger position-absolute top-0 start-0 m-2 p-2" style="font-size: 0.9em;">
							-@discountPercent%
						</span>

						<img src="@offer.ImageUrl" class="card-img-top" alt="@offer.Title" style="height: 200px; object-fit: cover;">

						<div class="card-body d-flex flex-column">
							<h5 class="card-title fw-bold">@offer.Title</h5>

							<div class="mt-auto">
								<hr />
								<div class="d-flex justify-content-between align-items-center mb-2">
									<span class="text-decoration-line-through text-muted small">@offer.OriginalPrice.ToString("C")</span>
									<span class="text-success fw-bold fs-5">@offer.DiscountPrice.ToString("C")</span>
								</div>

								<div class="d-flex justify-content-between text-muted small mb-3">
									<span><i class="bi bi-ticket-perforated"></i> დარჩა: @offer.CouponsCount</span>
								</div>

								<a asp-controller="Offer" asp-action="Details" asp-route-id="@offer.Id" class="btn btn-outline-primary w-100">
									დეტალების ნახვა
								</a>
							</div>
						</div>
					</div>
				</div>
			}
		</div>
	}
</div>
